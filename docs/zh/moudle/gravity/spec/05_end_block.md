# 结束块

每个 abci 结束块调用，更新队列和验证器集的操作
更改被指定执行。

## 削减

Slashing 包含多种类型的 slashing(验证器设置、批处理和声明 slashing)。我们将在以下部分介绍它们的工作原理。

### 验证器削减

验证器因未签署验证器集而被削减。 Cosmos-SDK 允许活跃的验证者集在块之间变化，因此我们需要在单个解绑期内存储多个验证者集。这允许验证器不会被削减。

验证器将被削减或丢失单个确认签名。

### 批量削减

验证器因未签署批处理请求而被削减。验证器将因丢失而被削减

## 证明

迭代当前正在投票的所有证明。一旦证明随机数比前一个高一，我们就停止搜索证明并调用“TryAttestation”。一旦特定随机数的证明有足够的票数，所有其他证明将被跳过，并且 `lastObservedEventNonce` 增加。

## 清理

清理循环通过批处理和逻辑调用以清理超时事务。

### 批次

当一批交易被创建时，它们具有指定的反向链高度，用于当批次无效时。发生这种情况时，我们必须将它们从商店中删除。在每个块的末尾，我们循环检查超时高度的逻辑调用存储。

### 逻辑调用

创建逻辑调用时，它包含超时高度。这个高度用于知道逻辑调用何时失效。在每个块的末尾，我们循环检查超时高度的逻辑调用存储。